
let data = [{
    "id": "1",
    "pais": "Ecuador",
    "aseguradora": "Latina Seguros",
    "nota_cobertura": "GRB-12-2020/2021",
    "asegurado": "Aeroregional",
    "desde": "06-abr-20",
    "hasta": "06-abr-21",
    "no_debito_credito": "-",
    "instalamentos": "1er instalamento",
    "fecha_vencimiento": "06-jun-20",
    "prima_total_global": "54,155.19",
    "prima_cobrada_global": "54,155.19",
    "primas_por_cobrar_notas_credito": "-"
},
{
    "id": "2",
    "pais": "Ecuador",
    "aseguradora": "Latina Seguros",
    "nota_cobertura": "GRB-12-2020/2021",
    "asegurado": "Aeroregional",
    "desde": "06-abr-20",
    "hasta": "06-abr-21",
    "no_debito_credito": "-",
    "instalamentos": "1er instalamento",
    "fecha_vencimiento": "06-jun-20",
    "prima_total_global": "54,155.19",
    "prima_cobrada_global": "54,155.19",
    "primas_por_cobrar_notas_credito": "-"
},
{
    "id": "3",
    "pais": "Ecuador",
    "aseguradora": "Latina Seguros",
    "nota_cobertura": "GRB-12-2020/2021",
    "asegurado": "Aeroregional",
    "desde": "06-abr-20",
    "hasta": "06-abr-21",
    "no_debito_credito": "-",
    "instalamentos": "1er instalamento",
    "fecha_vencimiento": "06-jun-20",
    "prima_total_global": "54,155.19",
    "prima_cobrada_global": "54,155.19",
    "primas_por_cobrar_notas_credito": "-"
},
{
    "id": "4",
    "pais": "Ecuador",
    "aseguradora": "Latina Seguros",
    "nota_cobertura": "GRB-12-2020/2021",
    "asegurado": "Aeroregional",
    "desde": "06-abr-20",
    "hasta": "06-abr-21",
    "no_debito_credito": "-",
    "instalamentos": "1er instalamento",
    "fecha_vencimiento": "06-jun-20",
    "prima_total_global": "54,155.19",
    "prima_cobrada_global": "54,155.19",
    "primas_por_cobrar_notas_credito": "-"
},
{
    "id": "5",
    "pais": "Ecuador",
    "aseguradora": "Latina Seguros",
    "nota_cobertura": "GRB-12-2020/2021",
    "asegurado": "Aeroregional",
    "desde": "06-abr-20",
    "hasta": "06-abr-21",
    "no_debito_credito": "-",
    "instalamentos": "1er instalamento",
    "fecha_vencimiento": "06-jun-20",
    "prima_total_global": "54,155.19",
    "prima_cobrada_global": "54,155.19",
    "primas_por_cobrar_notas_credito": "-"
},
{
    "id": "6",
    "pais": "Ecuador",
    "aseguradora": "Latina Seguros",
    "nota_cobertura": "GRB-12-2020/2021",
    "asegurado": "Aeroregional",
    "desde": "06-abr-20",
    "hasta": "06-abr-21",
    "no_debito_credito": "-",
    "instalamentos": "1er instalamento",
    "fecha_vencimiento": "06-jun-20",
    "prima_total_global": "54,155.19",
    "prima_cobrada_global": "54,155.19",
    "primas_por_cobrar_notas_credito": "-"
},
{
    "id": "7",
    "pais": "Ecuador",
    "aseguradora": "Latina Seguros",
    "nota_cobertura": "GRB-12-2020/2021",
    "asegurado": "Aeroregional",
    "desde": "06-abr-20",
    "hasta": "06-abr-21",
    "no_debito_credito": "-",
    "instalamentos": "1er instalamento",
    "fecha_vencimiento": "06-jun-20",
    "prima_total_global": "54,155.19",
    "prima_cobrada_global": "54,155.19",
    "primas_por_cobrar_notas_credito": "-"
},
{
    "id": "8",
    "pais": "Ecuador",
    "aseguradora": "Latina Seguros",
    "nota_cobertura": "GRB-12-2020/2021",
    "asegurado": "Aeroregional",
    "desde": "06-abr-20",
    "hasta": "06-abr-21",
    "no_debito_credito": "-",
    "instalamentos": "1er instalamento",
    "fecha_vencimiento": "06-jun-20",
    "prima_total_global": "54,155.19",
    "prima_cobrada_global": "54,155.19",
    "primas_por_cobrar_notas_credito": "-"
},
{
    "id": "9",
    "pais": "Ecuador",
    "aseguradora": "Latina Seguros",
    "nota_cobertura": "GRB-12-2020/2021",
    "asegurado": "Aeroregional",
    "desde": "06-abr-20",
    "hasta": "06-abr-21",
    "no_debito_credito": "-",
    "instalamentos": "1er instalamento",
    "fecha_vencimiento": "06-jun-20",
    "prima_total_global": "54,155.19",
    "prima_cobrada_global": "54,155.19",
    "primas_por_cobrar_notas_credito": "-"
},
{
    "id": "10",
    "pais": "Ecuador",
    "aseguradora": "Latina Seguros",
    "nota_cobertura": "GRB-12-2020/2021",
    "asegurado": "Aeroregional",
    "desde": "06-abr-20",
    "hasta": "06-abr-21",
    "no_debito_credito": "-",
    "instalamentos": "1er instalamento",
    "fecha_vencimiento": "06-jun-20",
    "prima_total_global": "54,155.19",
    "prima_cobrada_global": "54,155.19",
    "primas_por_cobrar_notas_credito": "-"
},
{
    "id": "11",
    "pais": "Ecuador",
    "aseguradora": "Latina Seguros",
    "nota_cobertura": "GRB-12-2020/2021",
    "asegurado": "Aeroregional",
    "desde": "06-abr-20",
    "hasta": "06-abr-21",
    "no_debito_credito": "-",
    "instalamentos": "1er instalamento",
    "fecha_vencimiento": "06-jun-20",
    "prima_total_global": "54,155.19",
    "prima_cobrada_global": "54,155.19",
    "primas_por_cobrar_notas_credito": "-"
},
{
    "id": "12",
    "pais": "Ecuador",
    "aseguradora": "Latina Seguros",
    "nota_cobertura": "GRB-12-2020/2021",
    "asegurado": "Aeroregional",
    "desde": "06-abr-20",
    "hasta": "06-abr-21",
    "no_debito_credito": "-",
    "instalamentos": "1er instalamento",
    "fecha_vencimiento": "06-jun-20",
    "prima_total_global": "54,155.19",
    "prima_cobrada_global": "54,155.19",
    "primas_por_cobrar_notas_credito": "-"
},
{
    "id": "13",
    "pais": "Ecuador",
    "aseguradora": "Latina Seguros",
    "nota_cobertura": "GRB-12-2020/2021",
    "asegurado": "Aeroregional",
    "desde": "06-abr-20",
    "hasta": "06-abr-21",
    "no_debito_credito": "-",
    "instalamentos": "1er instalamento",
    "fecha_vencimiento": "06-jun-20",
    "prima_total_global": "54,155.19",
    "prima_cobrada_global": "54,155.19",
    "primas_por_cobrar_notas_credito": "-"
},
{
    "id": "14",
    "pais": "Ecuador",
    "aseguradora": "Latina Seguros",
    "nota_cobertura": "GRB-12-2020/2021",
    "asegurado": "Aeroregional",
    "desde": "06-abr-20",
    "hasta": "06-abr-21",
    "no_debito_credito": "-",
    "instalamentos": "1er instalamento",
    "fecha_vencimiento": "06-jun-20",
    "prima_total_global": "54,155.19",
    "prima_cobrada_global": "54,155.19",
    "primas_por_cobrar_notas_credito": "-"
},
{
    "id": "15",
    "pais": "Ecuador",
    "aseguradora": "Latina Seguros",
    "nota_cobertura": "GRB-12-2020/2021",
    "asegurado": "Aeroregional",
    "desde": "06-abr-20",
    "hasta": "06-abr-21",
    "no_debito_credito": "-",
    "instalamentos": "1er instalamento",
    "fecha_vencimiento": "06-jun-20",
    "prima_total_global": "54,155.19",
    "prima_cobrada_global": "54,155.19",
    "primas_por_cobrar_notas_credito": "-"
}
];

$(document).ready(function () {

    console.log('sjrve');
    var token = $('meta[name="csrf-token"]').attr('content');
    var hosting = window.location.origin;
    // DataTable
    if (typeof data != 'undefined') {
        $('#gestion_table').DataTable({
            language: {
                url: "//cdn.datatables.net/plug-ins/1.12.1/i18n/es-ES.json"
            },
            dom: "Bfrtip",
            lengthChange: false,
            buttons: [
                'colvis',
                'copyHtml5',
                'csvHtml5',
                'excelHtml5',
                'pdfHtml5',
                'print'
            ],
            data: data,
            dataType: 'json',
            columns: [{
                    data: 'id'
                },
                {
                    data: 'pais'
                },
                {
                    data: 'aseguradora'
                },
                {
                    data: 'nota_cobertura'
                },
                {
                    data: 'asegurado'
                },
                {
                    data: 'desde'
                },
                {
                    data: 'hasta'
                },
                {
                    data: 'no_debito_credito'
                },
                {
                    data: 'instalamentos'
                },
                {
                    data: 'fecha_vencimiento'
                },
                {
                    data: 'prima_total_global'
                },
                {
                    data: 'prima_cobrada_global'
                },
                {
                    data: 'primas_por_cobrar_notas_credito'
                },
                /* {
                    data: null,
                    render: function (data, type, row) {
                        return `<a data-id=${row.id} class="btn btn-primary edit" role="button"><i class="fa-solid fa-pen-to-square"></i></a>`;
                    }
                }, */
            ],
            orderable: true,
            searchable: true
        }).buttons().container()
            .appendTo('#example_wrapper .col-md-6:eq(0)');
    }

    //Edit
    $('body').on('click', '.edit', function () {
        var id = $(this).data('id');
        $(location).attr('href', 'estados_de_cuenta/' + id + '/edit');
    });

    //Delete
    $('body').on('click', '.btn-delete', function () {
        var id = $(this).data('id');
        Swal.fire({
            title: 'Eliminar',
            text: "¿Estás seguro?",
            icon: 'warning',
            showCancelButton: true,
            confirmButtonColor: '#3085d6',
            cancelButtonColor: '#d33',
            confirmButtonText: 'Si, eliminarlo!'
        }).then((result) => {
            if (result.isConfirmed) {
                $.ajax(
                    {
                        url: window.location.origin + "/estados_de_cuenta/" + id,
                        type: 'DELETE',
                        data: {
                            "id": id,
                            "_token": token,
                        },
                        success: function () {
                            $(location).attr('href', window.location.origin + '/bancos');
                        },
                        error: function (data) {
                            console.log('Error:', data);
                        }
                    });
            }
        });
    });
});
